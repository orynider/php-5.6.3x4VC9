# $OpenLDAP: pkg/ldap/clients/fax500/Makefile.in,v 1.10.2.3 2000/06/13 17:57:01 kurt Exp $

UNIX_PRGS = rp500 fax500
EXEPRGS = $(@PLAT@_PRGS)
PROGRAMS = xrpcomp.tmp $(EXEPRGS)

SRCS= main.c faxtotpc.c rp500.c
XSRCS=fax5version.c rpversion.c

FAX5OBJS = main.o faxtotpc.o
RPOBJS =  rp500.o faxtotpc.o

LDAP_INCDIR= ../../include
LDAP_LIBDIR= ../../libraries

XLIBS =  -lldap -llber -llutil
XXLIBS	= $(SECURITY_LIBS) $(LUTIL_LIBS)

rp500 : rpversion.o
	$(LTLINK) -o $@ $(RPOBJS) rpversion.o $(LIBS)

fax500 : fax5version.o
	$(LTLINK) -o $@ $(RPOBJS) fax5version.o $(LIBS)

rpversion.c: ${RPOBJS} $(LDAP_LIBDEPEND)
	@-$(RM) $@
	$(MKVERSION) rp500 > $@

fax5version.c: ${FAX5OBJS} $(LDAP_LIBDEPEND)
	@-$(RM) $@
	$(MKVERSION) fax500 > $@

xrpcomp.tmp: xrpcomp
	$(SED) -e 's|%LIBEXECDIR%|$(libexecdir)|' $(srcdir)/xrpcomp > xrpcomp.tmp

install-local: $(PROGRAMS) FORCE
	-$(MKDIR) $(DESTDIR)$(libexecdir)
	@(								\
	    for prg in $(EXEPRGS); do					\
		$(LTINSTALL) $(INSTALLFLAGS) -s -m 755 $$prg$(EXEEXT)	\
		    $(DESTDIR)$(libexecdir);				\
	    done							\
	)
	$(INSTALL_SCRIPT) $(INSTALLFLAGS) xrpcomp.tmp	\
		$(DESTDIR)$(libexecdir)/xrpcomp
