.TH CHLOG2REPLOG 8C "26 April 1996" "U-M LDAP LDVERSION"
.SH NAME
chlog2replog \- convert an X.500 DSA-style changelog to an LDAP-style
replication log
.SH SYNOPSIS
.B SBINDIR/chlog2replog
.B \-r hostname:port [\-r hostname:port ...]
.B \-d dn\-suffix [\-o output\-file] < input\-file
.LP
.SH DESCRIPTION
.LP
chlog2replog is used to convert an X.500\-style changelog to an
LDAP\-style replication log.  It reads its standard input and
writes standard output if no \-o flag is given.  If the \-o flag
is given,
.B chlog2replog
writes its output to the given file, following
the same advisory locking mechanisms respected by the
.B slurpd
program.  This makes it possible to use chlog2replog in a pipeline
to produce input for
.B slurpd.

.SH OPTIONS
.TP
.BI \-r " hostname:port"
This option specifies the hostname and port number to which updates
should be propagated. 
.B chlog2replog
will include one "replica: hostname:port" directive in each replication
log entry it writes out for each
.B \-r
option given.  You may supply as many replica hostname:port options as
you wish.
.TP
.BI \-d " dn\-suffix"
This option specifies an additional string to append to converted
DNs (Distinguished Names) converted from the changelog file.  The
DNs in the changelog file will typically be partial DNs which omit
the portion of the directory tree "above" the organizational root.
For example, if your directory tree is rooted at o=University of
Michigan, c=US, you will need to include the argument
"\-d ", o=University of Michigan, c=US".
.TP
.BI \-o " output\-file"
If given, this option specifies an output file to which converted
replication log entries will be written.
.B chlog2replog
obeys the same file locking conventions used by
.B slurpd,
so that it is possible to use
.B chlog2replog
to "feed" changes from an X.500 DSA to
.B slurpd.  See the
.B examples
section, below, for more information.
.SH EXAMPLES
To read the DSA-style changelog file
.BR changlelog
and write on the standard output an LDAP-style replication log,
appending ", o=University of Michigan, c=US" to all entry
DNs, and including a replica: entry for host "ldapserver," port
389, give the command:
.LP
.nf
.ft tt
	SBINDIR/chlog2replog -d ", o=University of Michigan, c=US"
	-r ldapserver:389 < changelog
.ft
.fi
.LP
To do the same, but routing the output to the file "replog," using
slurpd\-compatible file\-locking,
give this command:
.LP
.nf
.ft tt
	SBINDIR/chlog2replog -d ", o=University of Michigan, c=US"
	-r ldapserver:389 -o replog < changelog
.ft
.fi
.LP
To continually read new changes from the file "changelog" and write
them to the file "replog",
give this command:
.LP
.nf
.ft tt
	tail +0f changelog  | SBINDIR/chlog2replog
	-d ", o=University of Michigan, c=US"
	-r ldapserver:389 -o replog < changelog
.ft
.fi

.LP
.SH "SEE ALSO"
.BR ldap (3),
.BR ldif (5),
.BR slurpd (8),
.BR slapd (8),
.LP
"The SLAPD and SLURPD Administrator's Guide"
